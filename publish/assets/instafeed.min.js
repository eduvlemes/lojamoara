!function(e,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():e.InstagramFeed=i()}(this,(function(){var e={host:"https://www.instagram.com/",username:"",tag:"",container:"",display_profile:!0,display_biography:!0,display_gallery:!0,display_captions:!1,display_igtv:!1,callback:null,styling:!0,items:8,items_per_row:4,margin:.5,image_size:640,lazy_load:!1,on_error:console.error},i={150:0,240:1,320:2,480:3,640:4},t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function a(e){return e.replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))}return function(t){this.options=Object.assign({},e),this.options=Object.assign(this.options,t),this.is_tag=""==this.options.username,this.valid=!0,""==this.options.username&&""==this.options.tag&&(this.options.on_error("InstagramFeed: Error, no username or tag defined.",1),this.valid=!1),void 0!==this.options.get_data&&console.warn("InstagramFeed: options.get_data is deprecated, options.callback is always called if defined"),null==this.options.callback&&""==this.options.container&&(this.options.on_error("InstagramFeed: Error, neither container found nor callback defined.",2),this.valid=!1),this.get=function(e){var i=this.is_tag?this.options.host+"explore/tags/"+this.options.tag+"/":this.options.host+this.options.username+"/",t=new XMLHttpRequest,a=this;t.onload=function(i){if(4===t.readyState)if(200===t.status){try{var o=t.responseText.split("window._sharedData = ")[1].split("<\/script>")[0]}catch(e){return void a.options.on_error("InstagramFeed: It looks like the profile you are trying to fetch is age restricted. See https://github.com/jsanahuja/InstagramFeed/issues/26",3)}if(void 0===(o=(o=JSON.parse(o.substr(0,o.length-1))).entry_data.ProfilePage||o.entry_data.TagPage))return $(".instafeed-container").remove(),void a.options.on_error("InstagramFeed: It looks like YOUR network has been temporary banned because of too many requests. See https://github.com/jsanahuja/jquery.instagramFeed/issues/25",4);o=o[0].graphql.user||o[0].graphql.hashtag,e(o,a)}else a.options.on_error("InstagramFeed: Unable to fetch the given user/tag. Instagram responded with the status code: "+t.statusText,5)},t.open("GET",i,!0),t.send()},this.parse_caption=function(e,i){return void 0!==e.node.edge_media_to_caption.edges[0]&&void 0!==e.node.edge_media_to_caption.edges[0].node&&void 0!==e.node.edge_media_to_caption.edges[0].node.text&&null!==e.node.edge_media_to_caption.edges[0].node.text?e.node.edge_media_to_caption.edges[0].node.text:void 0!==e.node.title&&null!==e.node.title&&0!=e.node.title.length?e.node.title:void 0!==e.node.accessibility_caption&&null!==e.node.accessibility_caption&&0!=e.node.accessibility_caption.length?e.node.accessibility_caption:(this.is_tag?i.name:i.username)+" image "},this.display=function(e){var t,o="";this.options.styling?(t={profile_container:" style='text-align:center;'",profile_image:" style='border-radius:10em;width:15%;max-width:125px;min-width:50px;'",profile_name:" style='font-size:1.2em;'",profile_biography:" style='font-size:1em;'",gallery_image:" style='width:100%;'",gallery_image_link:" style='width:"+(100-2*this.options.margin*this.options.items_per_row)/this.options.items_per_row+"%; margin:"+this.options.margin+"%; position:relative; display: inline-block; height: 100%;'"},this.options.display_captions&&(o+="<style>                        a[data-caption]:hover::after {                            content: attr(data-caption);                            text-align: center;                            font-size: 0.8rem;                            color: black;                            position: absolute;                            left: 0;                            right: 0;                            bottom: 0;                            padding: 1%;                            max-height: 100%;                            overflow-y: auto;                            overflow-x: hidden;                            background-color: hsla(0, 100%, 100%, 0.8);                        }                    </style>")):t={profile_container:"",profile_image:"",profile_name:"",profile_biography:"",gallery_image:"",gallery_image_link:""};if(this.options.display_profile&&(o+="<div class='instagram_profile'"+t.profile_container+">",o+="<img class='instagram_profile_image'"+(this.options.lazy_load?" loading='lazy'":"")+" src='"+e.profile_pic_url+"' alt='"+(this.is_tag?e.name+" tag pic":e.username+" profile pic")+" profile pic'"+t.profile_image+" />",this.is_tag?o+="<p class='instagram_tag'"+t.profile_name+"><a href='https://www.instagram.com/explore/tags/"+this.options.tag+"' rel='noopener' target='_blank'>#"+this.options.tag+"</a></p>":o+="<p class='instagram_username'"+t.profile_name+">@"+e.full_name+" (<a href='https://www.instagram.com/"+this.options.username+"' rel='noopener' target='_blank'>@"+this.options.username+"</a>)</p>",!this.is_tag&&this.options.display_biography&&(o+="<p class='instagram_biography'"+t.profile_biography+">"+e.biography+"</p>"),o+="</div>"),this.options.display_gallery){var s=void 0!==i[this.options.image_size]?i[this.options.image_size]:i[640];if(void 0!==e.is_private&&!0===e.is_private)o+="<p class='instagram_private'><strong>This profile is private</strong></p>";else{var n=(e.edge_owner_to_timeline_media||e.edge_hashtag_to_media).edges;_=n.length>this.options.items?this.options.items:n.length,o+="<div class='instagram_gallery row mx-0'>";for(var r=0;r<_;r++){var l,p,d="https://www.instagram.com/p/"+n[r].node.shortcode,g=a(this.parse_caption(n[r],e));switch(n[r].node.__typename){case"GraphSidecar":p="sidecar",l=n[r].node.thumbnail_resources[s].src;break;case"GraphVideo":p="video",l=n[r].node.thumbnail_src;break;default:p="image",l=n[r].node.thumbnail_resources[s].src}this.is_tag&&(e.username=""),"video"!=p&&(o+="<a  href='"+d+(this.options.display_captions?"' data-caption='"+g:"")+"' class='col-6 col-sm-2 px-0 instagram-"+p+"' rel='noopener' target='_blank'"+t.gallery_image_link+">",o+="<img"+(this.options.lazy_load?" loading='lazy'":"")+" src='"+l+"' alt='"+g+"'"+t.gallery_image+" />",o+="</a>")}o+="</div>"}}if(this.options.display_igtv&&void 0!==e.edge_felix_video_timeline){var h=e.edge_felix_video_timeline.edges,_=h.length>this.options.items?this.options.items:h.length;if(h.length>0){o+="<div class='instagram_igtv'>";for(r=0;r<_;r++){d="https://www.instagram.com/p/"+h[r].node.shortcode,g=a(this.parse_caption(h[r],e));o+="<a href='"+d+(this.options.display_captions?"' data-caption='"+g:"")+"' rel='noopener' target='_blank'"+t.gallery_image_link+">",o+="<img"+(this.options.lazy_load?" loading='lazy'":"")+" src='"+h[r].node.thumbnail_src+"' alt='"+g+"'"+t.gallery_image+" />",o+="</a>"}o+="</div>"}}this.options.container.innerHTML=o},this.run=function(){this.get((function(e,i){""!=i.options.container&&i.display(e),"function"==typeof i.options.callback&&i.options.callback(e)}))},this.valid&&this.run()}}));